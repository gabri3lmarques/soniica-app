{"version":3,"sources":["accordion/accordion.js","player/player.js","song/song.js","top-menu/top-menu.js"],"names":["AccordionMenu","constructor","this","accordionItems","document","querySelectorAll","init","forEach","item","querySelector","addEventListener","currentItem","isActive","classList","contains","remove","style","maxHeight","add","content","scrollHeight","Player","audio","Audio","currentSong","currentPlaylist","isPlaying","isLooping","isRandom","titleElement","artistElement","timeElement","gendersElement","thumbElement","playPauseButton","nextButton","previousButton","loopButton","randomButton","progressBarContainer","progressBar","volumeSlider","downloadButton","togglePlayPause","next","previous","toggleLoop","toggleRandom","updateProgressBar","handleSongEnd","adjustVolume","e","seek","startDrag","initializeFirstSong","volume","value","event","newVolume","target","firstPlaylist","firstSong","encodedUrl","dataset","src","decodedUrl","atob","startsWith","updatePlayerInfo","updateDownloadButton","console","error","getRandomSong","songs","let","randomSong","Math","floor","random","length","getNextSong","currentIndex","findIndex","song","getPreviousSong","play","songElement","playlistElement","syncButtons","pause","textContent","nextSong","previousSong","currentTime","genders","map","li","thumbSrc","join","button","progress","duration","width","rect","getBoundingClientRect","offsetX","clientX","left","dragHandler","stopDrag","removeEventListener","encodedDownloadLink","getAttribute","decodedLink","downloadBlock","replaceWith","cloneNode","preventDefault","window","location","open","player","playButton","closest","playlist","handleDownload","fetch","wpApiSettings","root","method","headers","X-WP-Nonce","nonce","Content-Type","credentials","then","response","json","data","success","alert","message","is_premium","downloadLink","setAttribute","removeAttribute","cursor","catch","playerDownloadButtons","userAvatar","log","userSubMenu","toggle"],"mappings":"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","file":"main.min.js","sourcesContent":["class AccordionMenu {\n    constructor() {\n        this.accordionItems = document.querySelectorAll('.accordion-item');\n        this.init();\n    }\n\n    init() {\n        this.accordionItems.forEach(item => {\n            const header = item.querySelector('.accordion-header');\n            \n            header.addEventListener('click', () => {\n                const currentItem = item;\n                const isActive = currentItem.classList.contains('active');\n                \n                // Fecha todos os itens\n                this.accordionItems.forEach(item => {\n                    item.classList.remove('active');\n                    const content = item.querySelector('.accordion-content');\n                    content.style.maxHeight = null;\n                });\n                \n                // Abre o item atual se não estava ativo\n                if (!isActive) {\n                    currentItem.classList.add('active');\n                    const content = currentItem.querySelector('.accordion-content');\n                    content.style.maxHeight = content.scrollHeight + \"px\";\n                }\n            });\n        });\n    }\n}\n\n// Inicializa o accordion quando o DOM estiver pronto\ndocument.addEventListener('DOMContentLoaded', () => {\n    if (document.querySelector('.accordion-item')) {\n        new AccordionMenu();\n    }\n});","class Player {\n    constructor() {\n        this.audio = new Audio();\n        this.currentSong = null;\n        this.currentPlaylist = null;\n        this.isPlaying = false;\n        this.isLooping = false; // Estado do loop\n        this.isRandom = false; // Estado do random\n\n        // Elementos do player principal\n        this.titleElement = document.querySelector('.current-title');\n        this.artistElement = document.querySelector('.current-artist');\n        this.timeElement = document.querySelector('.current-time');\n        this.gendersElement = document.querySelector('.current-genders');\n        this.thumbElement = document.querySelector('.current-thumb');\n        this.playPauseButton = document.querySelector('.play-pause');\n        this.nextButton = document.querySelector('.next');\n        this.previousButton = document.querySelector('.previous');\n        this.loopButton = document.querySelector('.loop');\n        this.randomButton = document.querySelector('.random'); // Botão de random\n        this.progressBarContainer = document.querySelector('.progress-bar-container');\n        this.progressBar = document.querySelector('.progress-bar');\n        this.volumeSlider = document.querySelector('#volume-slider'); // Slider de volume\n        if(document.querySelector('.download-link')){this.downloadButton = document.querySelector('.download-button')}\n       \n\n        // Event listeners\n        this.playPauseButton.addEventListener('click', () => this.togglePlayPause());\n        this.nextButton.addEventListener('click', () => this.next());\n        this.previousButton.addEventListener('click', () => this.previous());\n        this.loopButton.addEventListener('click', () => this.toggleLoop());\n        this.randomButton.addEventListener('click', () => this.toggleRandom());\n        this.audio.addEventListener('timeupdate', () => this.updateProgressBar());\n        this.audio.addEventListener('ended', () => this.handleSongEnd());\n        this.volumeSlider.addEventListener('input', (e) => this.adjustVolume(e));\n\n        // Eventos para a barra de progresso\n        this.progressBarContainer.addEventListener('click', (e) => this.seek(e));\n        this.progressBarContainer.addEventListener('mousedown', (e) => this.startDrag(e));\n\n        // Inicializar a primeira música automaticamente\n        this.initializeFirstSong();\n        \n        this.audio.volume = this.volumeSlider.value;\n    }\n    \n    adjustVolume(event) {\n        // Ajustar o volume do elemento de áudio com base no slider\n        const newVolume = event.target.value;\n        this.audio.volume = newVolume;\n    }\n\n    initializeFirstSong() {\n        const firstPlaylist = document.querySelector('.playlist');\n        if (!firstPlaylist) return;\n\n        const firstSong = firstPlaylist.querySelector('.song');\n        if (!firstSong) return;\n\n        this.currentPlaylist = firstPlaylist;\n        this.currentSong = firstSong;\n        \n        // Fix: songElement was undefined, should use firstSong\n        const encodedUrl = firstSong.dataset.src;\n        \n        try {\n            const decodedUrl = atob(encodedUrl);\n            if (!decodedUrl.startsWith('http://') && !decodedUrl.startsWith('https://')) {\n                console.error('Invalid decoded URL:', decodedUrl);\n                return;\n            }\n            \n            this.audio.src = decodedUrl;\n            this.updatePlayerInfo(firstSong);\n\n            if(this.downloadButton){\n                this.updateDownloadButton(firstSong);\n            }\n        } catch (e) {\n            console.error('Error decoding URL:', e);\n        }\n    }\n\n    toggleRandom() {\n        this.isRandom = !this.isRandom;\n\n        // Adicionar ou remover a classe 'active' no botão random\n        if (this.isRandom) {\n            this.randomButton.classList.add('active');\n        } else {\n            this.randomButton.classList.remove('active');\n        }\n    }\n\n    getRandomSong() {\n        const songs = [...this.currentPlaylist.querySelectorAll('.song')];\n        let randomSong;\n\n        do {\n            randomSong = songs[Math.floor(Math.random() * songs.length)];\n        } while (randomSong === this.currentSong && songs.length > 1);\n\n        return randomSong;\n    }\n\n    getNextSong() {\n        if (this.isRandom) {\n            return this.getRandomSong();\n        }\n\n        const songs = [...this.currentPlaylist.querySelectorAll('.song')];\n        const currentIndex = songs.findIndex(song => song === this.currentSong);\n        return songs[currentIndex + 1] || (this.isLooping ? songs[0] : null);\n    }\n\n    getPreviousSong() {\n        const songs = [...this.currentPlaylist.querySelectorAll('.song')];\n        const currentIndex = songs.findIndex(song => song === this.currentSong);\n        return songs[currentIndex - 1] || (this.isLooping ? songs[songs.length - 1] : null);\n    }\n\n    play(songElement, playlistElement) {\n        try {\n            const encodedUrl = songElement.dataset.src;\n            const decodedUrl = atob(encodedUrl);\n\n            if (!decodedUrl.startsWith('http://') && !decodedUrl.startsWith('https://')) {\n                console.error('Invalid decoded URL:', decodedUrl);\n                return;\n            }\n\n            if (this.currentSong && this.currentSong !== songElement) {\n                this.currentSong.querySelector('.play-button').classList.remove('active');\n                this.currentSong.classList.remove('active');\n            }\n\n            if (this.audio.src !== decodedUrl) {\n                this.audio.src = decodedUrl;\n            }\n\n            this.audio.play();\n            this.isPlaying = true;\n            this.currentSong = songElement;\n            this.currentPlaylist = playlistElement;\n\n            this.updatePlayerInfo(songElement);\n            this.syncButtons(songElement);\n\n            if(this.downloadButton) {\n                this.updateDownloadButton(songElement);\n            }\n        } catch (e) {\n            console.error('Error playing song:', e);\n        }\n    }\n\n    pause(songElement) {\n        this.audio.pause();\n        this.isPlaying = false;\n        songElement.querySelector('.play-button').classList.remove('active');\n        songElement.classList.remove('active');\n        this.playPauseButton.classList.remove('active');\n    }\n\n    togglePlayPause() {\n        if (this.isPlaying) {\n            this.pause(this.currentSong);\n            this.playPauseButton.textContent = 'Play';\n        } else {\n            this.audio.play();\n            this.isPlaying = true;\n            this.currentSong.querySelector('.play-button').classList.add('active');\n            this.currentSong.classList.add('active');\n            this.playPauseButton.classList.add('active');\n            this.playPauseButton.textContent = 'Pause';\n        }\n    }\n\n    toggleLoop() {\n        this.isLooping = !this.isLooping;\n\n        if (this.isLooping) {\n            this.loopButton.classList.add('active');\n        } else {\n            this.loopButton.classList.remove('active');\n        }\n    }\n\n    next() {\n        const nextSong = this.getNextSong();\n        if (nextSong) {\n            this.play(nextSong, this.currentPlaylist);\n        }\n    }\n\n    previous() {\n        if (this.audio.currentTime > 2) {\n            this.audio.currentTime = 0;\n        } else {\n            const previousSong = this.getPreviousSong();\n            if (previousSong) {\n                this.play(previousSong, this.currentPlaylist);\n            }\n        }\n    }\n\n    handleSongEnd() {\n        const nextSong = this.getNextSong();\n        if (nextSong) {\n            this.play(nextSong, this.currentPlaylist);\n        } else {\n            this.isPlaying = false;\n            this.audio.currentTime = 0;\n            this.syncButtons(null);\n        }\n    }\n\n    updatePlayerInfo(songElement) {\n        this.titleElement.textContent = songElement.querySelector('.title').textContent;\n        this.artistElement.textContent = songElement.querySelector('.artist').textContent;\n        this.timeElement.textContent = songElement.querySelector('.time').textContent;\n\n        const genders = [...songElement.querySelectorAll('.genders li')].map(li => li.textContent);\n        this.gendersElement.textContent = genders.join(', ');\n\n        const thumbSrc = songElement.querySelector('.thumb').src;\n        this.thumbElement.src = thumbSrc;\n    }\n\n    syncButtons(songElement) {\n        document.querySelectorAll('.play-button').forEach(button => button.classList.remove('active'));\n        document.querySelectorAll('.song').forEach(song => song.classList.remove('active'));\n\n        if (songElement) {\n            songElement.querySelector('.play-button').classList.add('active');\n            songElement.classList.add('active');\n            this.playPauseButton.classList.add('active');\n            this.playPauseButton.textContent = 'Pause';\n        } else {\n            this.playPauseButton.classList.remove('active');\n            this.playPauseButton.textContent = 'Play';\n        }\n    }\n\n    updateProgressBar() {\n        const progress = (this.audio.currentTime / this.audio.duration) * 100;\n        this.progressBar.style.width = `${progress}%`;\n    }\n\n    seek(event) {\n        const rect = this.progressBarContainer.getBoundingClientRect();\n        const offsetX = event.clientX - rect.left;\n        const percentage = offsetX / rect.width;\n        this.audio.currentTime = percentage * this.audio.duration;\n    }\n\n    startDrag(event) {\n        const dragHandler = (e) => this.seek(e);\n        const stopDrag = () => {\n            document.removeEventListener('mousemove', dragHandler);\n            document.removeEventListener('mouseup', stopDrag);\n        };\n\n        document.addEventListener('mousemove', dragHandler);\n        document.addEventListener('mouseup', stopDrag);\n\n        this.seek(event);\n    }\n\n    updateDownloadButton(songElement) {\n        if (this.downloadButton) {\n            const downloadElement = songElement.querySelector('.download-link');\n    \n            const encodedDownloadLink = downloadElement.getAttribute(\"data-href\");\n            let decodedLink = atob(encodedDownloadLink);\n    \n            // Remove event listeners duplicados antes de adicionar um novo\n            this.downloadButton.replaceWith(this.downloadButton.cloneNode(true));\n            this.downloadButton = document.querySelector('.download-button'); // Re-seleciona o botão atualizado\n\n            const downloadBlock = document.querySelector('.download-link');\n    \n            this.downloadButton.addEventListener('click', (event) => {\n                event.preventDefault();\n                if (!downloadBlock.classList.contains('download-blocked')) {\n                    window.open(decodedLink, '_blank');\n                } else {\n                    window.location = \"/get-premium\";\n                }\n\n            });\n        } \n    }\n      \n}\n\n\n\n// Inicializar o player apenas se o elemento existir\nif (document.querySelector('#player-main')) {\n    const player = new Player();\n\n    // Configurar eventos para as músicas\n    document.addEventListener('click', (event) => {\n        const playButton = event.target.closest('.play-button');\n        if (!playButton) return;\n\n        const song = playButton.closest('.song');\n        const playlist = playButton.closest('.playlist');\n        \n        if (!song || !playlist) return;\n\n        if (player.currentSong === song && player.isPlaying) {\n            player.pause(song);\n        } else {\n            player.play(song, playlist);\n        }\n    });\n}","function handleDownload(event) {\n    fetch(`${wpApiSettings.root}soniica/v1/register-download`, {\n        method: 'POST',\n        headers: {\n            'X-WP-Nonce': wpApiSettings.nonce,\n            'Content-Type': 'application/json'\n        },\n        credentials: 'same-origin'\n    })\n    .then(response => response.json())\n    .then(data => {\n        if (!data.success) {\n            event.preventDefault();\n            alert(data.message);\n            return false;\n        } else {\n            // Atualiza o estado de todos os botões de download para usuários não premium\n            if (!data.is_premium) {\n                document.querySelectorAll('.download-link').forEach(downloadLink => {\n                    downloadLink.classList.add('download-blocked');\n                    downloadLink.setAttribute('title', 'Aguarde 24 horas para fazer outro download.');\n                    downloadLink.textContent = 'Download indisponível';\n                    downloadLink.removeAttribute('href');\n                    downloadLink.removeAttribute('download');\n                    downloadLink.style.cursor = 'not-allowed';\n                });\n            }\n        }\n    })\n    .catch(error => {\n        console.error('Erro:', error);\n        event.preventDefault();\n        return false;\n    });\n\n    return true;\n}\n\nconst playerDownloadButtons = document.querySelectorAll('.download-link');\n\nplayerDownloadButtons.forEach((button) => {\n    button.addEventListener('click', (event) => {\n        event.preventDefault();\n\n        let encodedDownloadLink = button.getAttribute(\"data-href\");\n        const decodedLink = atob(encodedDownloadLink);\n        console.log(decodedLink)\n        if (!button.classList.contains('download-blocked')) {\n            window.open(decodedLink, '_blank');\n        } else {\n            console.log('deu ruim');\n        }\n    });\n});","\n    const userAvatar = document.querySelector(\".user-avatar\");\n    const userSubMenu = document.querySelector(\".user-sub-menu\");\n\n    if (userAvatar && userSubMenu) {\n        userAvatar.addEventListener(\"click\", function (event) {\n            userSubMenu.classList.toggle(\"active\");\n        });\n\n        document.addEventListener(\"click\", function (event) {\n            if (!userAvatar.contains(event.target) && !userSubMenu.contains(event.target)) {\n                userSubMenu.classList.remove(\"active\");\n            }\n        });\n    }\n"]}